(()=>{"use strict";const e=({timing:e,draw:t,duration:o})=>{let c=performance.now();requestAnimationFrame((function n(r){let a=(r-c)/o;a>1&&(a=1);let l=e(a);t(l),a<1&&requestAnimationFrame(n)}))};(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),n=e=>e<=9?"0"+e:e;!function e(){const r=(()=>{const e=(new Date("2021-04-09").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}})();c.textContent=n(r.seconds),o.textContent=n(r.minutes),t.textContent=n(r.hours),r.timeRemaining<=0?(c.textContent="00",o.textContent="00",t.textContent="00"):r.timeRemaining>0&&setTimeout(e),clearInterval()}()})(),(()=>{const e=document.querySelectorAll('a[href="#service-block"]'),t=document.querySelector('a[href="#portfolio"]'),o=document.querySelector('a[href="#calc"]'),c=document.querySelector('a[href="#command"]'),n=document.querySelector('a[href="#connect"]'),r=document.querySelector("#service-block"),a=document.querySelector("#portfolio"),l=document.querySelector("#calc"),s=document.querySelector("#command"),u=document.querySelector("#connect"),i=(e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),t.scrollIntoView({behavior:"smooth"})}))};i(e[0],r),i(e[1],r),i(t,a),i(o,l),i(c,s),i(n,u)})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu");e.addEventListener("click",(e=>{let c=e.target;if(c.closest(".menu"))o();else if(c.classList.contains("close-btn"))o();else if("A"===c.tagName&&c.closest("menu"))o();else{if(c.closest("menu"))return;t.classList.remove("active-menu")}}));const o=()=>{t.classList.toggle("active-menu")}})(),(()=>{const t=document.querySelector(".popup"),o=document.querySelectorAll(".popup-btn"),c=document.querySelector(".popup-content");o.forEach((o=>{o.addEventListener("click",(()=>{t.style.display="block",window.screen.width>768?e({duration:200,timing:e=>e,draw(e){c.style.top=250*e+"px"}}):(t.style.display="block",c.style.transform="")}))})),t.addEventListener("click",(e=>{const o=document.getElementById("form3-name"),c=document.getElementById("form3-phone"),n=document.getElementById("form3-email");let r=e.target;r.classList.contains("popup-close")?(t.style.display="none",o.value="",c.value="",n.value=""):(r=r.closest(".popup-content"),r||(t.style.display="none",o.value="",c.value="",n.value=""))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let c=e.target;c=c.closest(".service-header-tab"),c&&t.forEach(((e,n)=>{e===c&&(e=>{for(let c=0;c<o.length;c++)e===c?(t[c].classList.add("active"),o[c].classList.remove("d-none")):(t[c].classList.remove("active"),o[c].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content");let o,c=document.querySelectorAll(".dot"),n=0;const r=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},l=()=>{r(e,n,"portfolio-item-active"),r(c,n,"dot-active"),n++,n>=e.length&&(n=0),a(e,n,"portfolio-item-active"),a(c,n,"dot-active")},s=(e=3e3)=>{o=setInterval(l,e)};t.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,n,"portfolio-item-active"),r(c,n,"dot-active"),o.matches("#arrow-right")?n++:o.matches("#arrow-left")?n--:o.matches(".dot")&&c.forEach(((e,t)=>{e===o&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),a(e,n,"portfolio-item-active"),a(c,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{let t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{let t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&s()})),e.forEach((()=>{const e=document.querySelector(".portfolio-dots"),t=document.createElement("li");t.classList.add("dot"),e.append(t)})),c=document.querySelectorAll(".dot"),c.forEach((e=>{e.classList.contains("dot-active")||(r(c,n,"dot-active"),a(c,n,"dot-active"))})),s(2e3)})(),(()=>{const e=document.querySelectorAll(".command__photo"),t=[];e.forEach((e=>{t.push(e.src)})),e.forEach(((e,o)=>{e.addEventListener("mouseover",(e=>{const t=e.target;t.src=t.dataset.img})),e.addEventListener("mouseout",(e=>{const c=e.target;"mouseout"===e.type&&(c.src=t[o])}))}))})(),(()=>{const e=document.querySelectorAll("input.calc-item"),t=document.querySelector("body");e.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[\D/]/g,"")}))})),t.addEventListener("input",(e=>{const t=e.target;"user_name"===t.name?(t.value=t.value.replace(/[a-z\d/.,:;-=()\]!@#$%^&*_`\[+<>"№?]/gi,""),t.value=t.value.slice(0,1).toUpperCase()+t.value.slice(1).toLowerCase()):"user_email"===t.name?t.value=t.value.replace(/[а-я+\s+/()<>"\]#$%^&\[:;,\s+\\?=`|}{]/gi,""):"user_phone"===t.name?t.value=t.value.replace(/[a-zа-я\s/.,!@#$%^&\]=*<>\["№?:\-\\;{}|_~`]/gi,"").trim():"user_message"===t.name&&(t.value=t.value.replace(/[a-z!@#$^%*()_+}{|:"?><&]/gi,""))})),t.addEventListener("focusout",(e=>{const t=e.target;"user_name"===t.name?(t.value=t.value.replace(/[a-z\d/.,:;-=()\]!@#$%^&*_`\[+<>"№?]/gi,""),t.value=t.value.trim().slice(0,1).toUpperCase()+t.value.trim().slice(1).toLowerCase()):"user_email"===t.name?t.value=t.value.replace(/[^\w\s+/@\-\.]|()(?=\1)/gi,""):"user_phone"===t.name?t.value=t.value.replace(/[a-zа-я\s/.,!@#$%^&\]=*<>\["№?:;{}|_~`]/gi,"").trim():"user_message"===t.name&&(t.value=t.value.replace(/[a-z]/gi,""))}))})(),((t=100)=>{const o=document.querySelector(".calc-block"),c=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day");let l=document.getElementById("total");o.addEventListener("change",(o=>{const s=o.target;(s.matches("select")||s.matches("input"))&&(()=>{let o=0,s=1,u=1;const i=+n.value,m=c.options[c.selectedIndex].value;r.value>1&&(s+=(r.value-1)/10),a.value&&a.value<5?u*=2:a.value&&a.value<10&&(u*=1.5),m&&i&&(o=t*i*m*s*u),e({duration:2e3,timing:e=>e,draw(e){l.textContent=Math.floor(e*o)}})})()}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");e.forEach((c=>{c.addEventListener("submit",(n=>{n.preventDefault(),c.append(t);const r=document.querySelector(".preloader");r.style.display="block";const a=new FormData(c);o(a).then((o=>{if(200!==o.status)throw new Error("status network not 200.");setTimeout((()=>{r.style.display="none",e.forEach((e=>{e.reset()})),t.textContent="Ваша заявка отправлена! Мы с вами свяжемся!",t.style.color="#fff"}),3e3),setTimeout((()=>{t.textContent=""}),5e3),setTimeout((()=>{document.querySelector(".popup").style.display="none"}),5500)})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})})()})();